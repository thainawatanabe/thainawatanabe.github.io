(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"05aa":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNDgwLjU2IDQ4MC41NiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDgwLjU2IDQ4MC41NjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik0zNjUuMzU0LDMxNy45Yy0xNS43LTE1LjUtMzUuMy0xNS41LTUwLjksMGMtMTEuOSwxMS44LTIzLjgsMjMuNi0zNS41LDM1LjZjLTMuMiwzLjMtNS45LDQtOS44LDEuOA0KCQkJYy03LjctNC4yLTE1LjktNy42LTIzLjMtMTIuMmMtMzQuNS0yMS43LTYzLjQtNDkuNi04OS04MWMtMTIuNy0xNS42LTI0LTMyLjMtMzEuOS01MS4xYy0xLjYtMy44LTEuMy02LjMsMS44LTkuNA0KCQkJYzExLjktMTEuNSwyMy41LTIzLjMsMzUuMi0zNS4xYzE2LjMtMTYuNCwxNi4zLTM1LjYtMC4xLTUyLjFjLTkuMy05LjQtMTguNi0xOC42LTI3LjktMjhjLTkuNi05LjYtMTkuMS0xOS4zLTI4LjgtMjguOA0KCQkJYy0xNS43LTE1LjMtMzUuMy0xNS4zLTUwLjksMC4xYy0xMiwxMS44LTIzLjUsMjMuOS0zNS43LDM1LjVjLTExLjMsMTAuNy0xNywyMy44LTE4LjIsMzkuMWMtMS45LDI0LjksNC4yLDQ4LjQsMTIuOCw3MS4zDQoJCQljMTcuNiw0Ny40LDQ0LjQsODkuNSw3Ni45LDEyOC4xYzQzLjksNTIuMiw5Ni4zLDkzLjUsMTU3LjYsMTIzLjNjMjcuNiwxMy40LDU2LjIsMjMuNyw4Ny4zLDI1LjRjMjEuNCwxLjIsNDAtNC4yLDU0LjktMjAuOQ0KCQkJYzEwLjItMTEuNCwyMS43LTIxLjgsMzIuNS0zMi43YzE2LTE2LjIsMTYuMS0zNS44LDAuMi01MS44QzQwMy41NTQsMzU1LjksMzg0LjQ1NCwzMzYuOSwzNjUuMzU0LDMxNy45eiIvPg0KCQk8cGF0aCBkPSJNMzQ2LjI1NCwyMzguMmwzNi45LTYuM2MtNS44LTMzLjktMjEuOC02NC42LTQ2LjEtODljLTI1LjctMjUuNy01OC4yLTQxLjktOTQtNDYuOWwtNS4yLDM3LjENCgkJCWMyNy43LDMuOSw1Mi45LDE2LjQsNzIuOCwzNi4zQzMyOS40NTQsMTg4LjIsMzQxLjc1NCwyMTIsMzQ2LjI1NCwyMzguMnoiLz4NCgkJPHBhdGggZD0iTTQwMy45NTQsNzcuOGMtNDIuNi00Mi42LTk2LjUtNjkuNS0xNTYtNzcuOGwtNS4yLDM3LjFjNTEuNCw3LjIsOTgsMzAuNSwxMzQuOCw2Ny4yYzM0LjksMzQuOSw1Ny44LDc5LDY2LjEsMTI3LjUNCgkJCWwzNi45LTYuM0M0NzAuODU0LDE2OS4zLDQ0NC4zNTQsMTE4LjMsNDAzLjk1NCw3Ny44eiIvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K"},1406:function(t,e,s){},4513:function(t,e,s){"use strict";var i=s("882c"),o=s.n(i);o.a},"6d26":function(t,e,s){"use strict";var i=s("d54d"),o=s.n(i);o.a},7008:function(t){t.exports=JSON.parse("{}")},"882c":function(t,e,s){},9857:function(t,e,s){"use strict";var i=s("9b5f"),o=s.n(i);o.a},"9b5f":function(t,e,s){},a321:function(t,e,s){"use strict";var i=s("1406"),o=s.n(i);o.a},b420:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.items,(function(e){return i("q-card",{key:e.os,staticClass:"equipment-card"},[i("q-card-section",{staticClass:"card-content"},[i("div",{staticClass:"client-info"},[i("div",{staticClass:"card-top"},[i("p",{staticClass:"info-title",staticStyle:{"font-size":"14px"}},[t._v(t._s(e.subscriber))]),i("p",{staticClass:"info-title",staticStyle:{"font-size":"14px"}},[t._v(t._s(e.project))])]),i("div",{staticClass:"card-top"},[i("div",t._l(e.phones,(function(e,o){return i("div",{key:o,staticClass:"phone-icons-div"},[i("div",{staticClass:"icons-div"},[i("a",{attrs:{href:"tel:"+e}},[i("img",{staticClass:"icons",attrs:{src:s("05aa")}})]),i("a",{attrs:{href:"https://api.whatsapp.com/send?phone=55"+e,target:"_blank"}},[i("img",{staticClass:"icons",attrs:{src:s("d1d4")}})]),i("p",{staticClass:"info"},[t._v(t._s(e))])])])})),0),i("p",{staticClass:"info-title"},[t._v(t._s(e.os_number))])]),i("q-separator",{staticStyle:{margin:"0 auto 5px auto"}}),i("q-card-section",{staticClass:"card-grid",staticStyle:{padding:"0"}},[i("div",[i("p",{staticClass:"info-title"},[t._v("\n              Endereço:\n              "),i("span",{staticClass:"info"},[t._v(t._s(e.address.street+", "+e.address.number+" - "+e.address.district+", "+e.address.city))])])]),i("div",{staticClass:"flex-address"},[i("img",{staticStyle:{"margin-top":"5px","max-width":"30px"},attrs:{src:s("c319")},on:{click:function(s){return t.handleLocation(e.address)}}}),i("q-btn",{staticClass:"custom-button",attrs:{rounded:"","no-caps":"",flat:""},on:{click:function(s){return t.handleLocation(e.address)}}},[t._v("ROTA")])],1)]),i("div",{staticClass:"text-center"},[i("q-btn",{staticClass:"custom-button",attrs:{flat:"",rounded:""},on:{click:function(s){return t.$emit("showStatusPopup",e)}}},[i("span",{staticStyle:{"font-family":"'Muli-Bold'"}},[t._v("Lançar status")])])],1)],1)])],1)})),1)},o=[],a=(s("a481"),{props:{items:{type:Array,default:null}},methods:{handleLocation:function(t){var e,s;navigator.geolocation.getCurrentPosition((function(t){var i=t.coords;e=i.latitude,s=i.longitude}));var i=e+"+"+s,o=t.street.replace(" ","+")+"+"+t.number,a=-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPad")||-1!=navigator.platform.indexOf("iPod"),n=a?"maps://":"https://",c=n+"maps.google.com/maps?",u="saddr="+i,r="&daddr="+o,l=i?c+r:c+u+r;window.open(l)}},computed:{}}),n=a,c=(s("a321"),s("2877")),u=s("eebe"),r=s.n(u),l=s("f09f"),d=s("a370"),A=s("eb85"),p=s("9c40"),m=Object(c["a"])(n,i,o,!1,null,null,null);e["a"]=m.exports;r()(m,"components",{QCard:l["a"],QCardSection:d["a"],QSeparator:A["a"],QBtn:p["a"]})},b6ec:function(t,e,s){"use strict";var i=s("ca9b"),o=s.n(i);o.a},bc34:function(t,e,s){"use strict";var i=s("fe1d"),o=s.n(i);o.a},c319:function(t,e,s){t.exports=s.p+"img/map.7b0f543f.jpg"},ca9b:function(t,e,s){},d1d4:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDQxOC4xMzUgNDE4LjEzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDE4LjEzNSA0MTguMTM1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBzdHlsZT0iZmlsbDojN0FEMDZEOyIgZD0iTTE5OC45MjksMC4yNDJDODguNSw1LjUsMS4zNTYsOTcuNDY2LDEuNjkxLDIwOC4wMmMwLjEwMiwzMy42NzIsOC4yMzEsNjUuNDU0LDIyLjU3MSw5My41MzYNCgkJTDIuMjQ1LDQwOC40MjljLTEuMTkxLDUuNzgxLDQuMDIzLDEwLjg0Myw5Ljc2Niw5LjQ4M2wxMDQuNzIzLTI0LjgxMWMyNi45MDUsMTMuNDAyLDU3LjEyNSwyMS4xNDMsODkuMTA4LDIxLjYzMQ0KCQljMTEyLjg2OSwxLjcyNCwyMDYuOTgyLTg3Ljg5NywyMTAuNS0yMDAuNzI0QzQyMC4xMTMsOTMuMDY1LDMyMC4yOTUtNS41MzgsMTk4LjkyOSwwLjI0MnogTTMyMy44ODYsMzIyLjE5Nw0KCQljLTMwLjY2OSwzMC42NjktNzEuNDQ2LDQ3LjU1OS0xMTQuODE4LDQ3LjU1OWMtMjUuMzk2LDAtNDkuNzEtNS42OTgtNzIuMjY5LTE2LjkzNWwtMTQuNTg0LTcuMjY1bC02NC4yMDYsMTUuMjEybDEzLjUxNS02NS42MDcNCgkJbC03LjE4NS0xNC4wN2MtMTEuNzExLTIyLjkzNS0xNy42NDktNDcuNzM2LTE3LjY0OS03My43MTNjMC00My4zNzMsMTYuODktODQuMTQ5LDQ3LjU1OS0xMTQuODE5DQoJCWMzMC4zOTUtMzAuMzk1LDcxLjgzNy00Ny41NiwxMTQuODIyLTQ3LjU2QzI1Mi40NDMsNDUsMjkzLjIxOCw2MS44OSwzMjMuODg3LDkyLjU1OGMzMC42NjksMzAuNjY5LDQ3LjU1OSw3MS40NDUsNDcuNTYsMTE0LjgxNw0KCQlDMzcxLjQ0NiwyNTAuMzYxLDM1NC4yODEsMjkxLjgwMywzMjMuODg2LDMyMi4xOTd6Ii8+DQoJPHBhdGggc3R5bGU9ImZpbGw6IzdBRDA2RDsiIGQ9Ik0zMDkuNzEyLDI1Mi4zNTFsLTQwLjE2OS0xMS41MzRjLTUuMjgxLTEuNTE2LTEwLjk2OC0wLjAxOC0xNC44MTYsMy45MDNsLTkuODIzLDEwLjAwOA0KCQljLTQuMTQyLDQuMjItMTAuNDI3LDUuNTc2LTE1LjkwOSwzLjM1OGMtMTkuMDAyLTcuNjktNTguOTc0LTQzLjIzLTY5LjE4Mi02MS4wMDdjLTIuOTQ1LTUuMTI4LTIuNDU4LTExLjUzOSwxLjE1OC0xNi4yMTgNCgkJbDguNTc2LTExLjA5NWMzLjM2LTQuMzQ3LDQuMDY5LTEwLjE4NSwxLjg0Ny0xNS4yMWwtMTYuOS0zOC4yMjNjLTQuMDQ4LTkuMTU1LTE1Ljc0Ny0xMS44Mi0yMy4zOS01LjM1Ng0KCQljLTExLjIxMSw5LjQ4Mi0yNC41MTMsMjMuODkxLTI2LjEzLDM5Ljg1NGMtMi44NTEsMjguMTQ0LDkuMjE5LDYzLjYyMiw1NC44NjIsMTA2LjIyMmM1Mi43Myw0OS4yMTUsOTQuOTU2LDU1LjcxNywxMjIuNDQ5LDQ5LjA1Nw0KCQljMTUuNTk0LTMuNzc3LDI4LjA1Ni0xOC45MTksMzUuOTIxLTMxLjMxN0MzMjMuNTY4LDI2Ni4zNCwzMTkuMzM0LDI1NS4xMTQsMzA5LjcxMiwyNTIuMzUxeiIvPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo="},d54d:function(t,e,s){},ef35:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"justify-evenly"},[s("OSPage",{attrs:{os:t.currentOS},on:{close:function(e){t.showStatusPopup=!1}}})],1)},o=[],a=s("2b0e"),n=s("b420"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"dialog-card"}},[s("div",{staticClass:"text-center"},[s("q-btn-toggle",{staticClass:"custom-toggle",attrs:{"no-caps":"",rounded:"",unelevated:"","toggle-color":"primary",color:"white","text-color":"primary",options:t.typeOptions},on:{click:function(e){return t.clearData()}},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),s("div",{staticClass:"text-center",staticStyle:{"margin-bottom":"15px","margin-top":"15px"}},[s("strong",[t._v("OS")]),t._v("\n    "+t._s(t.os.os_number)+"\n  ")]),"productive"===t.type?s("productive-status",{attrs:{os:t.os,multiple:t.os.multipleSerials,models:t.models},on:{setStatus:t.onSetStatus,showPopup:t.onShowPopup}}):t._e(),"improductive"===t.type?s("improductive-status",{attrs:{os:t.os,improductiveMotives:t.os.motives,multiple:t.os.multipleSerials},on:{setStatus:t.onSetStatus,showPopup:t.onShowPopup}}):t._e(),t.showPopup?s("generic-popup",{attrs:{popupProps:t.popupProps},on:{close:t.handleClose}}):t._e()],1)},u=[],r=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("c47a")),l=s.n(r),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("q-btn",{staticClass:"choice-button",attrs:{rounded:"","no-caps":"",flat:"","icon-right":"add",label:"Adicionar equipamento",disable:!t.multiple&&t.equipments.length>0},on:{click:function(e){t.beep=!0}}}),t.equipments[0]?s("div",t._l(t.equipments,(function(e,i){return s("div",{key:i,staticClass:"abstract",staticStyle:{"margin-bottom":"10px"}},[s("div",{staticClass:"abstract-inner"},[s("div",{staticClass:"text-center",staticStyle:{margin:"auto auto"}},[s("span",[t._v("Modelo: "+t._s(e["modelo-id"].label))]),s("span",[t._v("Serial: "+t._s(e.serial?e.serial:"Danificado"))])]),s("q-btn",{staticStyle:{position:"absolute"},attrs:{rounded:"",flat:"",icon:"close"},on:{click:function(e){return t.remove(i)}}})],1)])})),0):t._e(),s("div",[s("q-btn",{staticClass:"confirmation-button",attrs:{rounded:"","no-caps":"",flat:"",label:"Salvar",disable:t.equipments.length<1},on:{click:function(e){return t.submitProductive()}}})],1),t.beep?s("produtive-status-popup",{attrs:{multiple:t.multiple,models:t.models},on:{close:function(e){t.beep=!1},setEquipment:t.onSetEquipment}}):t._e()],1)},A=[],p=(s("6762"),s("2fdb"),s("f337")),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("q-card",{attrs:{id:"dialog-card"}},[s("q-card-section",{staticClass:"card-header"},[s("q-btn",{attrs:{rounded:"",flat:"",icon:"close"},on:{click:function(e){return t.$emit("close")}}}),s("div",[t._v("BAIXA")])],1),s("q-separator",{staticStyle:{background:"#4764f1"}}),s("q-card-section",[t.streaming?s("div",{staticClass:"text-center"},[s("q-btn",{staticStyle:{"margin-bottom":"15px"},attrs:{flat:"",rounded:"",icon:"arrow_back"},on:{click:function(e){t.streaming=!1}}},[t._v("Voltar")]),s("StreamBarcodeReader",{on:{decode:t.onDecode}})],1):s("div",{staticClass:"text-center"},[s("q-select",{staticStyle:{"max-width":"90%",margin:"auto auto"},attrs:{dense:"",options:t.modelOptions,behavior:"menu",label:"Selecione o modelo"},model:{value:t.equipment.model,callback:function(e){t.$set(t.equipment,"model",e)},expression:"equipment.model"}}),s("div",[s("q-btn",{staticClass:"choice-button popup-button",attrs:{flat:"",rounded:""},on:{click:function(e){t.streaming=!0}}},[t._v("Bipar serial")]),t.equipment.code?s("p",[t._v("Serial: "+t._s(t.equipment.code))]):t._e()],1),s("div",[s("q-checkbox",{attrs:{label:"Serial danificado"},on:{input:function(e){t.setValue(e)}},model:{value:t.equipment.damagedSerial,callback:function(e){t.$set(t.equipment,"damagedSerial",e)},expression:"equipment.damagedSerial"}})],1),s("q-btn",{staticClass:"confirmation-button popup-button",attrs:{flat:"",rounded:"",disable:!t.equipment.damagedSerial&&!t.equipment.code||!t.equipment.model},on:{click:function(e){return t.onProductiveStatus()}}},[t._v("Confirmar")])],1)])],1)],1)},M=[],L=s("2169"),g={props:{multiple:{type:Boolean,default:!1},models:{type:Array,default:null}},components:{StreamBarcodeReader:p["a"],VueSignaturePad:L["default"],ProdutiveStatusPopup:z},created:function(){s("2169")},data:function(){return{show:!0,equipment:{damagedSerial:!1,code:"",model:""},quantity:0,streaming:!1,sign:!0}},computed:{modelOptions:function(){var t=[];return this.models.map((function(e){var s={label:e.nome,value:e.id};t.push(s)})),t}},methods:{onDecode:function(t){this.equipment.code=t,this.equipment.damagedSerial=!1,this.streaming=!1},onProductiveStatus:function(){var t={"modelo-id":this.equipment.model,"serial-danificado":this.equipment.damagedSerial?"S":"N",serial:this.equipment.code};this.$emit("setEquipment",t)},setValue:function(t){this.equipment.damagedSerial=t,console.log(t),1==t&&(this.equipment.code="")}}},j=g,N=(s("6d26"),s("2877")),f=s("eebe"),v=s.n(f),S=s("24e8"),w=s("f09f"),C=s("a370"),y=s("9c40"),h=s("eb85"),D=s("ddd8"),b=s("8f8e"),T=Object(N["a"])(j,m,M,!1,null,"62fd75c2",null),z=T.exports;v()(T,"components",{QDialog:S["a"],QCard:w["a"],QCardSection:C["a"],QBtn:y["a"],QSeparator:h["a"],QSelect:D["a"],QCheckbox:b["a"]});var x={props:{multiple:{type:Boolean,default:!1},models:{type:Array,default:null},os:{type:Object,default:null}},components:{StreamBarcodeReader:p["a"],VueSignaturePad:L["default"],ProdutiveStatusPopup:z},created:function(){console.log(L["default"])},data:function(){return{quantity:1,status:"productive",damagedSerial:!1,codes:[],equipments:[],streaming:!1,sign:!0,beep:!1}},computed:{},methods:{onSetEquipment:function(t){this.equipments.push(t),this.beep=!1},remove:function(t){this.equipments.splice(t,1)},submitProductive:function(){var t=this,e=[];this.equipments.map((function(t){t["modelo-id"]=t["modelo-id"].value,e.push(t)}));var s={params:{"req-id":3,chave:this.$store.state.session.token,dados:{"qtde-coletas":this.equipments.length,coletas:[{"os-numero":this.os.os_number,"cliente-id":this.os.client_id,seriais:e}]}}};this.equipments.length,this.os.os_number,this.os.client_id;this.$axios.get("",s).then((function(e){var s=e.data;if("N"==s.erro){var i=!1,o={},a="";s.coletas.map((function(t){"S"==t.erro&&(i=!0)})),setTimeout((function(){0==i?(o={success:!0,title:"Sucesso",text:"Coleta da OS "+t.os.os_number+" realizada com sucesso"},t.$emit("showPopup",o)):(o={success:!1,title:"Erro",text:"Coleta da OS "+t.os.os_number+" falhou. "+a},t.$emit("showPopup",o))}),500)}else{var n={success:!1,title:"Erro",text:"Coleta da OS "+t.os.os_number+" falhou. "+s["erro-mensagem"]};t.$emit("showPopup",n)}}))},onDecode:function(t){this.codes.includes(t)?alert("Código já bipado!"):(this.codes.push(t),this.streaming=!1)},onProductiveStatus:function(){var t={codes:[],status:""};t.codes=this.codes,t.status=this.status,this.$emit("setStatus",t)},setValue:function(t){this.damagedSerial=t}}},Q=x,O=(s("9857"),Object(N["a"])(Q,d,A,!1,null,"39ddc770",null)),P=O.exports;v()(O,"components",{QSelect:D["a"],QBtn:y["a"]});var I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[t.streaming||t.img?s("div",{staticClass:"q-mt-md q-mr-sm"},[s("video",{ref:"video",staticClass:"full-height full-width",staticStyle:{"object-fit":"cover"},style:{display:t.stopped?"none":""},attrs:{id:"video",autoplay:"",playsinline:"true"}}),s("canvas",{ref:"canvas",staticStyle:{"object-fit":"cover",background:"yellow",height:"100%",width:"100%"},style:{display:t.stopped?"":"none"},attrs:{id:"canvas",width:"320",height:"240"}}),t.img?t._e():s("q-btn",{staticClass:"confirmation-button",attrs:{flat:"",rounded:""},on:{click:function(e){return t.takePicture()}}},[t._v("Tirar foto")]),t.img?s("q-btn",{staticClass:"confirmation-button",attrs:{flat:"",rounded:""},on:{click:function(e){return t.repeat()}}},[t._v("Repetir foto")]):t._e()],1):t._e(),!t.streaming||t.img?s("div",[s("q-select",{staticStyle:{"max-width":"80%",margin:"auto auto"},attrs:{label:"Motivo de cancelamento",dense:"","emit-value":"","map-options":"",options:t.motives,behavior:"menu"},model:{value:t.improductiveStatus,callback:function(e){t.improductiveStatus=e},expression:"improductiveStatus"}}),s("div",[t.img?t._e():s("q-btn",{staticClass:"choice-button popup-button",attrs:{flat:"",rounded:""},on:{click:function(e){t.streaming=!0}}},[t._v("Tirar foto")])],1),s("q-btn",{staticClass:"confirmation-button popup-button",attrs:{flat:"",rounded:""},on:{click:function(e){return t.onImproductiveStatus()}}},[t._v("Confirmar")])],1):t._e()])},k=[],E={props:{improductiveMotives:{type:Array,default:null},multiple:{type:Boolean,default:!1},os:{type:Object,default:!1}},data:function(){return{improductiveStatus:null,streaming:!1,img:null,stopped:!1,showError:!1}},computed:{motives:function(){var t=[];return this.improductiveMotives.map((function(e){var s={label:e.nome,value:e.id};t.push(s)})),t}},methods:{onImproductiveStatus:function(){var t=this,e={params:{"req-id":3,chave:this.$store.state.session.token,dados:{"qtd-coletas":1,coletas:[{"os-numero":this.os.os_number,"cliente-id":this.os.client_id,seriais:null,"motivo-id":this.improductiveStatus}]}}},s={};this.$axios.post("",s,e).then((function(e){var s=e.data;if("N"==s.erro){var i=!1,o={},a="";s.coletas.map((function(t){"S"==t.erro&&(i=!0)})),i?(o={success:!0,title:"Erro",text:"Baixa da OS "+t.os.os_number+" falhou. "+a},t.$emit("showPopup",o)):(o={success:!0,title:"Sucesso",text:"Baixa da OS "+t.os.os_number+" realizada com sucesso"},t.$emit("showPopup",o))}else{var n={success:!1,title:"Erro",text:"Baixa da OS "+t.os.os_number+" falhou. "+s["erro-mensagem"]};t.$emit("showPopup",n)}}))},takePicture:function(){if(this.webkit)window.webkit.messageHandlers.handler.postMessage({toggleStream:!1}),this.img=this.temp;else{this.stopped=!0;var t=document.getElementById("canvas"),e=document.querySelector("video");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0),this.img=t.toDataURL("image/jpeg"),"data:,"===this.img&&(this.img="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD//gATQ3JlYXRlZCB3aXRoIEdJTVD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////2wBDAf//////////////////////////////////////////////////////////////////////////////////////wgARCAAyADIDAREAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAL/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGQAAAAAAAAAAAAAAAAAAAAAAAD/8QAFBABAAAAAAAAAAAAAAAAAAAAUP/aAAgBAQABBQJH/8QAFBEBAAAAAAAAAAAAAAAAAAAAUP/aAAgBAwEBPwFH/8QAFBEBAAAAAAAAAAAAAAAAAAAAUP/aAAgBAgEBPwFH/8QAFBABAAAAAAAAAAAAAAAAAAAAUP/aAAgBAQAGPwJH/8QAFBABAAAAAAAAAAAAAAAAAAAAUP/aAAgBAQABPyFH/9oADAMBAAIAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAUP/aAAgBAwEBPxBH/8QAFBEBAAAAAAAAAAAAAAAAAAAAUP/aAAgBAgEBPxBH/8QAFBABAAAAAAAAAAAAAAAAAAAAUP/aAAgBAQABPxBH/9k=")}this.stopped=!0},createStream:function(){var t=this;window.camera=this,window.webkit?(this.webkit=!0,window.webkit.messageHandlers.handler.postMessage({toggleStream:!0})):navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:{video:!0,facingMode:"environment"},audio:!1}).then((function(t){var e=document.querySelector("video");e.srcObject=t,e.onloadedmetadata=function(){e.play()}})).catch((function(e){t.cameraError="Câmera não identificada",console.log(e)}))},repeat:function(){window.webkit&&window.webkit.messageHandlers.handler.postMessage({toggleStream:!0}),this.img="",this.stopped=!1,this.createStream()},newImageBuffer:function(t){this.stopped=!0,this.temp="data:image/jpeg;base64, "+t}},watch:{streaming:function(){this.streaming&&this.createStream()}}},B=E,q=(s("4513"),Object(N["a"])(B,I,k,!1,null,"e9c13e42",null)),_=q.exports;v()(q,"components",{QBtn:y["a"],QSelect:D["a"]});s("7008");var U=s("2f62"),Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("q-card",{attrs:{id:"dialog-card"}},[s("q-card-section",{staticClass:"card-header"},[s("q-btn",{attrs:{rounded:"",flat:"",icon:"close"},on:{click:function(e){return t.$emit("close")}}}),s("div",[t._v(t._s(t.popupProps.title))])],1),s("q-separator",{staticStyle:{background:"#4764f1"}}),s("q-card-section",[s("div",{staticClass:"text-center"},[t._v(t._s(t.popupProps.text))]),s("div",{staticClass:"text-center"},[s("q-btn",{staticClass:"confirmation-button popup-button",attrs:{flat:"",rounded:""},on:{click:function(e){return t.$emit("close",t.popupProps.success)}}},[t._v("Confirmar")])],1)])],1)],1)},Y=[],G={props:{popupProps:{type:Object,default:null}},data:function(){return{show:!0}}},J=G,H=(s("b6ec"),Object(N["a"])(J,Z,Y,!1,null,"6118b9e4",null)),K=H.exports;function W(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function $(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?W(Object(s),!0).forEach((function(e){l()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):W(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}v()(H,"components",{QDialog:S["a"],QCard:w["a"],QCardSection:C["a"],QBtn:y["a"],QSeparator:h["a"]});var F={props:{},components:{ProductiveStatus:P,ImproductiveStatus:_,GenericPopup:K},data:function(){return{show:!0,type:"productive",status:null,os:null,popupProps:{},showPopup:!1,typeOptions:[{label:"COLETADO",value:"productive"},{label:"NÃO COLETADO",value:"improductive"}]}},created:function(){this.os=this.currentOS,console.log(this.os)},methods:{onShowPopup:function(t){this.popupProps=t,this.showPopup=!0},handleClose:function(t){t?(this.showPopup=!1,this.$router.push("/")):this.showPopup=!1},onSetStatus:function(t){console.log(t),this.$emit("close")},clearData:function(){}},computed:$({},Object(U["c"])(["currentOS"]),{models:function(){var t=this,e=this.$store.state.freight.clients,s=[];return e.map((function(e){e.id==t.currentOS.client_id&&(s=e.equipments)})),s}})},V=F,R=(s("bc34"),s("6a67")),X=Object(N["a"])(V,c,u,!1,null,"164d7d40",null),tt=X.exports;v()(X,"components",{QBtnToggle:R["a"],QBtn:y["a"]});var et=a["a"].extend({name:"PageIndex",components:{FreightCard:n["a"],OSPage:tt},data(){return{showStatusPopup:!1}},computed:{...Object(U["c"])(["currentOS"])},methods:{...Object(U["b"])([""])},created(){}}),st=et,it=s("9989"),ot=Object(N["a"])(st,i,o,!1,null,null,null);e["default"]=ot.exports;v()(ot,"components",{QPage:it["a"]})},fe1d:function(t,e,s){}}]);